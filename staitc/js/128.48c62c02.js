"use strict";(self["webpackChunkvue3_element_plus_demo_test"]=self["webpackChunkvue3_element_plus_demo_test"]||[]).push([[128],{5178:function(e,t,a){a.d(t,{$M:function(){return r},UH:function(){return i},Yj:function(){return s},aH:function(){return u},gY:function(){return n},o:function(){return o},p7:function(){return _}});var l=a(2884);const i=e=>{const t={page_num:1,page_size:10,query:"",search_type:""};return t.page_num=e.page_num,t.page_size=e.page_size,t.search_type=e.search_type,""==e.query?t.query="null":t.query=e.query,l.Z.get(`/git/${t.search_type}/${t.page_num}/${t.page_size}/${t.query}`)},r=e=>l.Z.post("/git/allmonitor",e),u=e=>l.Z.post("/git/singlemonitor",{monitor_id:e}),o=e=>l.Z["delete"]("/git",{data:e}),n=e=>{const t={page_num:1,page_size:10,query:"",search_type:"",current_monitor_id:"",detail_type:""};return t.page_num=e.page_num,t.page_size=e.page_size,t.search_type=e.search_type,t.current_monitor_id=e.current_monitor_id,t.detail_type=e.detail_type,""==e.query?t.query="null":t.query=e.query,l.Z.get(`/gitdetail/${t.detail_type}/${t.search_type}/${t.current_monitor_id}/${t.page_num}/${t.page_size}/${t.query}`)},s=(e,t)=>l.Z.post(`/gitdetail/${e}`,{monitor_id:t}),_=e=>l.Z.get(`/gitdetail/overview/${e}`)},6128:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var l=a(3396),i=a(4870),r=a(4143),u=a(1853),o=a(2483),n=a(7139);const s=[{prop:"commit_branch",label:"分支",width:150},{prop:"commit_message",label:"信息",width:150},{prop:"commit_url",label:"地址",width:150},{prop:"commit_author_name",label:"author_name",width:150},{prop:"commit_author_date",label:"author_date",width:150},{prop:"commit_committer_name",label:"committer_name",width:150},{prop:"commit_committer_date",label:"committer_date",width:150},{prop:"commit_level",label:"风险等级",width:100}];var _=a(5178);const m={class:"demo-pagination-block pagination-right"};var p=(0,l.aZ)({__name:"Commit",props:{current_monitor_id:String},setup(e){const t=e,a=(0,i.iH)(!1),r=(0,i.iH)(!1),u=(0,i.iH)(!1),o=(0,i.iH)([]),p=(0,i.iH)(),d=(0,i.iH)({query:"",current_monitor_id:t.current_monitor_id,page_size:10,page_num:1,search_type:"",detail_type:"commit"}),c=async()=>{d.value.search_type="null";const e=await(0,_.gY)(d.value);o.value=e.data.commits,p.value=e.data.total};c();const g=async(e,t)=>{await(0,_.Yj)(e,t)};g("commit",t.current_monitor_id);const w=e=>{d.value.page_num=1,d.value.page_size=e,c()},v=e=>{d.value.page_num=e,c()};return(e,t)=>{const _=(0,l.up)("el-button"),c=(0,l.up)("el-table-column"),g=(0,l.up)("el-table"),y=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(g,{data:o.value,style:{width:"100%"},size:"small","highlight-current-row":""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,i.SU)(s),((t,a)=>((0,l.wg)(),(0,l.j4)(c,{prop:t.prop,label:t.label,width:t.width,key:a},(0,l.Nv)({_:2},["commit_author_date"==t.prop?{name:"default",fn:(0,l.w5)((({row:t})=>[(0,l.Uk)((0,n.zw)(e.$commons.trans_time2date(t.commit_author_date)),1)])),key:"0"}:"commit_url"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[(0,l._)("a",{href:e.commit_url,target:"_blank"},(0,n.zw)(e.commit_url),9,["href"])])),key:"1"}:"commit_committer_date"==t.prop?{name:"default",fn:(0,l.w5)((({row:t})=>[(0,l.Uk)((0,n.zw)(e.$commons.trans_time2date(t.commit_committer_date)),1)])),key:"2"}:"commit_message"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[1==e.commit_level?((0,l.wg)(),(0,l.iD)("span",{key:0,style:{color:"red"}},(0,n.zw)(e.commit_message),1)):0==e.commit_level?((0,l.wg)(),(0,l.iD)("span",{key:1},(0,n.zw)(e.commit_message),1)):(0,l.kq)("",!0)])),key:"3"}:"commit_level"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[1==e.commit_level?((0,l.wg)(),(0,l.j4)(_,{key:0,round:"",style:{color:"red"},size:"small",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("匹配风险")])),_:1})):0==e.commit_level?((0,l.wg)(),(0,l.j4)(_,{key:1,round:"",size:"small",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("无匹配风险")])),_:1})):(0,l.kq)("",!0)])),key:"4"}:void 0]),1032,["prop","label","width"])))),128))])),_:1},8,["data"]),(0,l._)("div",m,[(0,l.Wm)(y,{"current-page":d.value.page_num,"onUpdate:current-page":t[0]||(t[0]=e=>d.value.page_num=e),"page-size":d.value.page_size,"onUpdate:page-size":t[1]||(t[1]=e=>d.value.page_size=e),"page-sizes":[10,20,30],small:a.value,disabled:u.value,background:r.value,total:p.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:w,onCurrentChange:v,class:"navbar-right"},null,8,["current-page","page-size","small","disabled","background","total"])])],64)}}}),d=a(89);const c=(0,d.Z)(p,[["__scopeId","data-v-6cc5ad0c"]]);var g=c;const w=[{prop:"issue_id",label:"id",width:150},{prop:"issue_url",label:"地址",width:150},{prop:"issue_title",label:"标题",width:150},{prop:"issue_body",label:"内容",width:150},{prop:"issue_create_user",label:"提交用户",width:150},{prop:"issue_create_date",label:"提交日期",width:150},{prop:"issue_type",label:"类型",width:150},{prop:"issue_level",label:"风险等级",width:100}],v=["href"],y={class:"demo-pagination-block pagination-right"};var b=(0,l.aZ)({__name:"Issue",props:{current_monitor_id:String},setup(e){const t=e,a=(0,i.iH)(!1),r=(0,i.iH)(!1),u=(0,i.iH)(!1),o=(0,i.iH)([]),s=(0,i.iH)(),m=(0,i.iH)({query:"",current_monitor_id:t.current_monitor_id,page_size:10,page_num:1,search_type:"",detail_type:"issue"}),p=async()=>{m.value.search_type="null";const e=await(0,_.gY)(m.value);o.value=e.data.issues,s.value=e.data.total};p();const d=async(e,t)=>{await(0,_.Yj)(e,t)};d("issue",t.current_monitor_id);const c=e=>{m.value.page_num=1,m.value.page_size=e,p()},g=e=>{m.value.page_num=e,p()};return(e,t)=>{const _=(0,l.up)("el-button"),p=(0,l.up)("el-table-column"),d=(0,l.up)("el-table"),b=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(d,{data:o.value,style:{width:"100%"},size:"small","highlight-current-row":""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,i.SU)(w),((t,a)=>((0,l.wg)(),(0,l.j4)(p,{prop:t.prop,label:t.label,width:t.width,key:a},(0,l.Nv)({_:2},["issue_url"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[(0,l._)("a",{href:e.issue_url,target:"_blank"},(0,n.zw)(e.issue_url),9,v)])),key:"0"}:"issue_create_date"==t.prop?{name:"default",fn:(0,l.w5)((({row:t})=>[(0,l.Uk)((0,n.zw)(e.$commons.trans_time2date(t.issue_create_date)),1)])),key:"1"}:"issue_body"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[1==e.issue_level?((0,l.wg)(),(0,l.iD)("span",{key:0,style:{color:"red"}},(0,n.zw)(e.issue_body),1)):0==e.issue_level?((0,l.wg)(),(0,l.iD)("span",{key:1},(0,n.zw)(e.issue_body),1)):(0,l.kq)("",!0)])),key:"2"}:"issue_title"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[1==e.issue_level?((0,l.wg)(),(0,l.iD)("span",{key:0,style:{color:"red"}},(0,n.zw)(e.issue_title),1)):0==e.issue_level?((0,l.wg)(),(0,l.iD)("span",{key:1},(0,n.zw)(e.issue_title),1)):(0,l.kq)("",!0)])),key:"3"}:"issue_level"==t.prop?{name:"default",fn:(0,l.w5)((({row:e})=>[1==e.issue_level?((0,l.wg)(),(0,l.j4)(_,{key:0,round:"",style:{color:"red"},size:"small",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("匹配风险")])),_:1})):0==e.issue_level?((0,l.wg)(),(0,l.j4)(_,{key:1,round:"",size:"small",disabled:""},{default:(0,l.w5)((()=>[(0,l.Uk)("无匹配风险")])),_:1})):(0,l.kq)("",!0)])),key:"4"}:void 0]),1032,["prop","label","width"])))),128))])),_:1},8,["data"]),(0,l._)("div",y,[(0,l.Wm)(b,{"current-page":m.value.page_num,"onUpdate:current-page":t[0]||(t[0]=e=>m.value.page_num=e),"page-size":m.value.page_size,"onUpdate:page-size":t[1]||(t[1]=e=>m.value.page_size=e),"page-sizes":[10,20,30],small:a.value,disabled:u.value,background:r.value,total:s.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:c,onCurrentChange:g,class:"navbar-right"},null,8,["current-page","page-size","small","disabled","background","total"])])],64)}}});const h=(0,d.Z)(b,[["__scopeId","data-v-2ca028fe"]]);var f=h;const k=e=>((0,l.dD)("data-v-7a7d59df"),e=e(),(0,l.Cn)(),e),z=k((()=>(0,l._)("label",null,"commit个数：",-1))),U=k((()=>(0,l._)("label",null,"issue个数：",-1)));var q=(0,l.aZ)({__name:"Overview",props:{current_monitor_id:String},setup(e){const t=e,a=(0,i.iH)({commit:0,issue:0}),r=async()=>{const e=await(0,_.p7)(t.current_monitor_id);a.value.commit=e.data.counts.commit,a.value.issue=e.data.counts.issue};return r(),(e,t)=>{const i=(0,l.up)("el-button"),r=(0,l.up)("el-form-item"),u=(0,l.up)("el-col"),o=(0,l.up)("el-row");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o,{size:"small"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{size:"small"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[z,(0,l.Wm)(i,{round:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.value.commit),1)])),_:1})])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{size:"small"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[U,(0,l.Wm)(i,{round:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(a.value.issue),1)])),_:1})])])),_:1})])),_:1})])),_:1})],64)}}});const H=(0,d.Z)(q,[["__scopeId","data-v-7a7d59df"]]);var S=H,j=(0,l.aZ)({__name:"Detail",setup(e){const t=(0,o.yj)(),a=t.query.monitor_id,n=t.query.current_tab,s=(0,i.iH)(sessionStorage.getItem("current_tab")||n||"Overview"),_=(0,i.iH)({Overview:!0,Commit:!1,Issue:!1}),m=(e,t)=>{for(let a in _.value)a==e.paneName?(_.value[a]=!0,sessionStorage.setItem("current_tab",a)):_.value[a]=!1};return _.value[s.value]=!0,(e,t)=>((0,l.wg)(),(0,l.j4)((0,i.SU)(r.Kf),{class:"card"},{default:(0,l.w5)((()=>[(0,l.Wm)((0,i.SU)(u.Ub),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"demo-tabs",onTabClick:m},{default:(0,l.w5)((()=>[(0,l.Wm)((0,i.SU)(u.p8),{label:"Overview",name:"Overview"},{default:(0,l.w5)((()=>[_.value.Overview?((0,l.wg)(),(0,l.j4)(S,{key:0,current_monitor_id:(0,i.SU)(a)},null,8,["current_monitor_id"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)((0,i.SU)(u.p8),{label:"Commit",name:"Commit"},{default:(0,l.w5)((()=>[_.value.Commit?((0,l.wg)(),(0,l.j4)(g,{key:0,current_monitor_id:(0,i.SU)(a)},null,8,["current_monitor_id"])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)((0,i.SU)(u.p8),{label:"Issue",name:"Issue"},{default:(0,l.w5)((()=>[_.value.Issue?((0,l.wg)(),(0,l.j4)(f,{key:0,current_monitor_id:(0,i.SU)(a)},null,8,["current_monitor_id"])):(0,l.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1}))}});const W=(0,d.Z)(j,[["__scopeId","data-v-22c277ba"]]);var $=W}}]);
//# sourceMappingURL=128.48c62c02.js.map